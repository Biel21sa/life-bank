<body>
    <div class="left">
        <article>
            <h1>Lorem ipsum.</h1>
            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Exercitationem alias amet et blanditiis nisi, consequuntur unde nesciunt magni beatae dolorum facilis voluptate laboriosam, saepe aliquam? Iste quo dolores accusantium eveniet! Lorem ipsum dolor, sit amet consectetur adipisicing elit. Praesentium, dicta vel. Facilis error consequatur omnis velit eius eum dicta quod accusamus natus magni! Quod, fuga saepe enim quo aspernatur consequuntur. Lorem ipsum, dolor sit amet consectetur adipisicing elit. Vel iure deserunt perspiciatis labore quasi nostrum ut eaque ex ratione molestiae corrupti rem eos inventore, soluta temporibus magni quos doloribus saepe.</p>
        </article>
        <svg xmlns="http://www.w3.org/2000/svg">
            <ellipse cx="10" cy="10" rx="8" ry="8" style="fill:white;"/>
            <ellipse cx="48" cy="10" rx="8" ry="8" style="fill:rgba(255, 255, 255, 0.5);"/>
            <ellipse cx="86" cy="10" rx="8" ry="8" style="fill:rgba(255, 255, 255, 0.5);"/> 
        </svg>
    </div>
    @if (signupStage() == 'type') {
        <div class="right">
            <main>
                <h2>Cadastrar como</h2>
                <p>Cadastrar conta</p>
                <form onsubmit="return false">
                    <div id="typeCheckmark">
                        <div  [ngClass]="accountType == 'doador' ? 'checkmark_checked' : 'checkmark_unchecked'" (click)="updateAccountType('doador')">
                           <span></span>
                        </div>
                        <span (click)="updateAccountType('doador')">
                            <h2 [ngStyle]="{'color': accountType == 'doador' ? 'var(--primary)': 'black'}">Doador</h2>
                            <p [ngStyle]="{'color': accountType == 'doador' ? 'var(--primary)': 'black'}">Quero doar e receber benefícios</p>
                        </span>
                    </div>
                    <div id="typeCheckmark" (click)="updateAccountType('clinica')">
                        <div [ngClass]="accountType == 'clinica' ? 'checkmark_checked' : 'checkmark_unchecked'" (click)="updateAccountType('clinica')">
                            <span></span>
                        </div>
                        <span (click)="updateAccountType('clinica')">
                            <h2 [ngStyle]="{'color': accountType == 'clinica' ? 'var(--primary)': 'black'}">Clínica</h2>
                            <p [ngStyle]="{'color': accountType == 'clinica' ? 'var(--primary)': 'black'}">Quero trazer benefícios a doadores regulares</p>
                        </span>
                    </div>
                    <button class="Login" (click)="signupStage.set('credentials')">Próximo</button>
                    <p>Já possuí conta? <a routerLink="/login">Entrar</a></p>
                </form>
            </main>
            <a routerLink="">← Retornar</a>
        </div>
    }
    @if (signupStage() == 'credentials') {
        <div class="right">
            <main>
                <h2>Sign in</h2>
                <p>Cadastrar conta</p>
                <form [formGroup]="form">
                    <input placeholder="Nome" required formControlName="fullname" 
                    [ngStyle]="{'border': form.controls['fullname'].hasError('minlength') || form.controls['fullname'].hasError('maxlength') ? 'solid 2px #fd2a2a' : null}"> 
                    @if(form.controls['fullname'].hasError('minlength')){
                        <p id="error-red">Nome possui menos que {{fullnameCharacterMin}} caracteres.</p>
                    }@else if (form.controls['fullname'].hasError('maxlength')) {
                        <p id="error-red">Nome possui mais que {{fullnameCharacterMax}} caracteres.</p>
                    }
                    <br>
                    <input placeholder="Email" type="email" required formControlName="email"
                    [ngStyle]="{'border': form.controls['email'].hasError('email') ? 'solid 2px #fd2a2a' : null}">
                    @if (form.controls['email'].hasError('email')) {
                        <p id="error-red">Credencial não coincide com um email.</p>
                    }
                    <br>
                    @if (accountType == "clinica"){
                        <input placeholder="CNPJ" required formControlName="cnpj"
                        [ngStyle]="{'border': form.controls['cnpj'].hasError('minlength') || form.controls['cnpj'].hasError('maxlength') ? 'solid 2px #fd2a2a' : null}"> 
                        @if (form.controls['cnpj'].hasError('maxlength') || form.controls['cnpj'].hasError('minlength')) {
                            <p id="error-red">Credencial incorreta.</p>
                        }
                        <br>
                    }
                    <input placeholder="Senha" type="password" required formControlName="password"
                    [ngStyle]="{'border': form.controls['password'].hasError('minlength') || form.controls['password'].hasError('maxlength') ? 'solid 2px #fd2a2a' : null}"> 
                    @if(form.controls['password'].hasError('minlength')){
                        <p id="error-red">Senha possui menos que {{passwordCharacterMin}} caracteres.</p>
                    }@else if (form.controls['password'].hasError('maxlength')) {
                        <p id="error-red">Senha possui mais que {{passwordCharacterMax}} caracteres.</p>
                    }
                    <br>
                    <input placeholder="Repita a senha" type="password" required formControlName="repeatpassword"
                    [ngStyle]="{'border': !passwordsAreEqual() ? 'solid 2px #fd2a2a' : null}">
                    @if(!passwordsAreEqual()){
                        <p id="error-red">Senhas não coincidem.</p>
                    }
                    <br>
                    <button class="Login" [disabled]="!validateCredentials()">Sign Up</button>
                    <p>Já possuí conta? <a routerLink="/login">Entrar</a></p>
                </form>
            </main>
            <a (click)="signupStage.set('type')" style="cursor: pointer;">← Voltar</a>
        </div>
    }
</body>