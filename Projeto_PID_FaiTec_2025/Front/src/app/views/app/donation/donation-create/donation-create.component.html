<div class="container">
  <div class="page-header">
    <h1>Registrar Doação</h1>
    <p>Registre uma nova doação de sangue no sistema</p>
  </div>

  <mat-card>
    <mat-card-header>
      <mat-card-title>
        <mat-icon>volunteer_activism</mat-icon>
        Formulário de Registro de Doação
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="donationForm" (ngSubmit)="onSubmit()">

        <!-- Informações do Doador -->
        <div class="section">
          <h3>Informações do Doador</h3>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Selecionar Doador</mat-label>
            <mat-select formControlName="donorId" required>
              <mat-option *ngFor="let donor of donors" [value]="donor.id">
                {{ donor?.user?.name }}, {{ donor?.bloodType }}, {{ (donor?.user?.cpf || '') | mask: '000.000.000-00' }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>person</mat-icon>
          </mat-form-field>
        </div>

        <!-- Informações da Doação -->
        <div class="section">
          <h3>Informações da Doação</h3>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Quantidade (ml)</mat-label>
            <input matInput type="number" formControlName="quantity" min="100" max="500" required>
            <mat-icon matSuffix>local_drink</mat-icon>
          </mat-form-field>
        </div>

      </form>
    </mat-card-content>

    <mat-card-actions>
      <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="!donationForm.valid">
        <mat-icon>save</mat-icon>
        Registrar Doação
      </button>
      <button mat-button (click)="onCancel()">
        <mat-icon>cancel</mat-icon>
        Cancelar
      </button>
    </mat-card-actions>
  </mat-card>
</div>